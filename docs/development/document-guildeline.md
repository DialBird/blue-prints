# ドキュメント作成ガイドライン

## 概要

- プロジェクトにおけるドキュメント作成の統一方針とベストプラクティスを定義する。
- 一貫性のある構造と内容により、開発チームの理解と実装効率を向上させる。

## 基本方針

### 文書構造の統一

- **H2階層の統一**: 全ての実装ガイドライン(docs/development/*.md)は5つのH2セクションで構成
- **深い階層の禁止**: H4以下の深い階層は使用しない（最大H3まで）
- **平坦な構造推奨**: 深いネストより箇条書きやテーブルで整理し、300行以内、やむを得ない場合にのみ500行まで許容
- **不要な項目**: 「利点」「今後の改善案」「テスト戦略」「メタデータ」「関連Issue」は不要
- **実装例ではなく、実装パターンを書く**: 実装例はすぐ陳腐化するので書かない。代わりに実装パターンを書く。

### 標準H2構造（実装ガイドライン用）

```markdown
# {Pattern}実装ガイドライン

## 概要

## 基本方針

## 実装パターン
```

### 図表表現の制限

- **Mermaid図のみ許可**: 複雑なフローや関係性の視覚的説明が必要な場合のみ
- **ASCII図表は禁止**: メンテナンスコスト高・差分の見づらさ・表示崩れリスクのため
- **テーブル・リストの活用**: 状態遷移・対応関係・比較表はMarkdownテーブルで表現

### コードスニペットの方針

- **実装例は必須**: 抽象的な説明だけでなく、具体的なコード例を提供
- **TypeScript前提**: 型定義を含む完全なコード例を記載
- **重複をなるべく回避**: 似たようなコードは、「// 中略」を多用して回避する

### テーブル設計原則

- **列数制限**: 最大3列まで（可読性確保のため）
- **概要用途**: テーブルは「対比の概要」を示すためのもの
- **詳細は後続**: テーブル後に必ず詳細説明セクションを続ける

## 実装例

### 基本方針セクションの構成

```markdown
## 基本方針

### 配置とアーキテクチャ

- 配置ディレクトリの明記
- 採用する設計原則（DDD等）

### 責務と役割

- 3つの核となる責務を箇条書きで明記
- 抽象的にならず具体的な責務を記載

### 命名規則

- プレフィックス・サフィックスの統一
- 良い例・悪い例の対比テーブル

### アノテーション方針

- @architecture、@usecaseの使用方針
- 各層での適用ルール

### エラーハンドリング

- 例外の分類と対応方法
- 各層での責務分担

### 実装パターン

- 基本的な実装の型定義とコード例
- 依存性注入のパターン
```

### 実装例セクションの構成

````markdown
## 実装例

### 基本的な{操作名}

```ts
// 完全なコード例（import文は省略可）
export class SampleClass {
  // 具体的な実装
}
```
````

### 複雑な{操作名}

```ts
// より複雑なケースの実装例
```

### 利点

- 実装パターンの利点を箇条書きで明記
- 技術的メリットと保守性の観点

````

### テスト戦略セクションの構成

```markdown
## テスト戦略

### 単体テスト
- モック化の方針
- テストすべき観点

### 結合テスト
- 統合テストでの確認項目
- 実際のリソース使用方針

### テスト例（オプション）
- 具体的なテストコード例
- 重要なテストケースの例示
````

### 今後の改善案セクションの構成

```markdown
## 今後の改善案

### {改善カテゴリ1}

- 具体的な改善項目を箇条書き

### 設計原則の徹底

1. 番号付きリストで5つの原則を明記
2. 各原則は簡潔に1行で表現
3. 保守性・型安全性等の観点を含む
```

## テスト戦略

### ドキュメントの網羅性チェック

- **必須セクション**: 5つのH2セクションが全て存在することを確認
- **構造の一貫性**: 同種のドキュメント間で構造が統一されていることを確認
- **実装例の完全性**: コード例が動作可能な形で記載されていることを確認

### 内容の適切性チェック

- **具体性**: 抽象的すぎる説明がないかを確認
- **実用性**: 実際の開発で使える具体的な指針が含まれているかを確認
- **一貫性**: プロジェクト全体の方針と矛盾がないかを確認

### レビューチェックリスト

```markdown
- [ ] H2構造が5つのセクションで統一されている
- [ ] 実装例セクションに具体的なコード例がある
- [ ] テーブルが3列以下で構成されている
- [ ] ASCII図表が使用されていない
- [ ] 責務が3つの核心要素で整理されている
- [ ] 命名規則に良い例・悪い例の対比がある
- [ ] エラーハンドリングの方針が明確
- [ ] 改善案が具体的で実行可能
```

## 今後の改善案

### メンテナンス効率の向上

- **テンプレート化**: 新しいパターンドキュメント作成時のテンプレート提供
- **自動チェック**: ドキュメント構造の自動検証ツール導入

### 内容の充実

- **実例の拡充**: より多くの具体的なコード例の追加
- **トラブルシューティング**: よくある問題と解決策の追加

### 設計原則の徹底

1. **構造の統一**: 全ドキュメントで同じH2構造を維持
2. **具体性の確保**: 抽象的でない実用的な指針を提供
3. **実装可能性**: 実際に動作するコード例を含める
4. **保守性**: 将来の変更に対応しやすい構造を維持
5. **一貫性**: プロジェクト全体の方針との整合性を保つ
